<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π</title>
    <link rel="stylesheet" type="text/css" href="css.css">

    
</head>
<body>
    <div class="intro" id="intro">
        <div class="zad">  <br>      <h1 class="logo">–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π</h1>
        <p class="welcome">üóì–¢–≤–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å, —Ç–≤–æ–∏ –∑–∞–º–µ—Ç–∫–∏, —Ç–≤–æ—è –∂–∏–∑–Ω—å!üóì</p>
        <p class="description">üìà–ó–∞–ø–∏—Å—ã–≤–∞–π –º–µ—á—Ç—ã, –ø–ª–∞–Ω–∏—Ä—É–π —É—Å–ø–µ—Ö!üìà</p>
        <p class="events">üöó–ó–∞–ø–∏—à–∏, —á—Ç–æ–±—ã –Ω–µ –∑–∞–±—ã—Ç—å –∫—É–ø–∏—Ç—å –∫—Ä–∞—Å–Ω—ã–π –ø–æ–ª–∏–∫!!!üöó</p>
        <p class="explore">‚úî–õ–µ–≥–∫–æ –ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ –∏ –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ –Ω–∏ –æ–¥–Ω–æ –≤–∞–∂–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ!‚úî</p>
        <button id="startButton">–ù–∞—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è</button>
    </div>
</div>

     <div class="main-content" id="mainContent" style="display: none;">
<body onload="loadEvents()">

<header>
    <h1 class="header-title">–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π</h1>
</header>

<div class="date-selector">
    <div style="flex: 1;">
        <label for="month">–ú–µ—Å—è—Ü:</label>
        <select id="month" onchange="updateCalendar()">
            <option value="1">–Ø–Ω–≤–∞—Ä—å</option>
            <option value="2">–§–µ–≤—Ä–∞–ª—å</option>
            <option value="3">–ú–∞—Ä—Ç</option>
            <option value="4">–ê–ø—Ä–µ–ª—å</option>
            <option value="5">–ú–∞–π</option>
            <option value="6">–ò—é–Ω—å</option>
            <option value="7">–ò—é–ª—å</option>
            <option value="8">–ê–≤–≥—É—Å—Ç</option>
            <option value="9">–°–µ–Ω—Ç—è–±—Ä—å</option>
            <option value="10">–û–∫—Ç—è–±—Ä—å</option>
            <option value="11">–ù–æ—è–±—Ä—å</option>
            <option value="12">–î–µ–∫–∞–±—Ä—å</option>
        </select>
        <label for="year">–ì–æ–¥:</label>
        <input type="number" id="year" value="2023" onchange="updateCalendar()">
    </div>
    <button class="button" onclick="toggleDarkMode()">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º–Ω—É—é —Ç–µ–º—É</button>
</div>

<div class="weekdays">
    <div class="weekday">–ü–Ω</div>
    <div class="weekday">–í—Ç</div>
    <div class="weekday">–°—Ä</div>
    <div class="weekday">–ß—Ç</div>
    <div class="weekday">–ü—Ç</div>
    <div class="weekday">–°–±</div>
    <div class="weekday">–í—Å</div>
</div>

<div id="calendar"></div>

<div class="blur-background" id="blurBackground"></div>
<div class="modal" id="modal">
    <div class="modal-content" id="modalContent">
        <h2 id="modalHeader"></h2>
        <input id="eventTitle" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è" maxlength="15" />
        <textarea id="eventDescription" rows="4" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è" maxlength="100"></textarea>
        <div class="char-limit" id="charLimit"></div>
        <button class="button" onclick="saveEvent()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="button" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>
<div>„Ö§</div>
<div>„Ö§</div>
<div>„Ö§</div>
<div>„Ö§</div>
<div>„Ö§</div>
<footer class="footer">
        <p>&copy; 2023 –í–∞—à –°–∞–π—Ç. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        <nav>
            <a href="#">–ì–ª–∞–≤–Ω–∞—è</a> | 
            <a href="#">–û –Ω–∞—Å</a> | 
            <a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </nav>
    </footer>
   </div>
<script>
    let events = {};
    const calendarElement = document.getElementById('calendar');
    const modal = document.getElementById('modal');
    const blurBackground = document.getElementById('blurBackground');
    const eventTitle = document.getElementById('eventTitle');
    const eventDescription = document.getElementById('eventDescription');
    const charLimit = document.getElementById('charLimit');

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏–∑ localStorage
    function loadEvents() {
        const storedEvents = localStorage.getItem('events');
        if (storedEvents) {
            events = JSON.parse(storedEvents);
        }
        document.body.classList.add('loaded'); // –ü–æ–º–µ—á–∞–µ–º —Ç–µ–ª–æ –∫–∞–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ
        updateCalendar(); // –í—ã–∑—ã–≤–∞–µ–º updateCalendar —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –≤ localStorage
    function saveToLocalStorage() {
        localStorage.setItem('events', JSON.stringify(events));
    }

    function updateCalendar() {
        const month = parseInt(document.getElementById('month').value);
        const year = parseInt(document.getElementById('year').value);
        calendarElement.innerHTML = '';

        const daysInMonth = new Date(year, month, 0).getDate();
        const firstDay = new Date(year, month - 1, 1).getDay();
        const emptyDays = (firstDay === 0) ? 6 : firstDay - 1;

        for (let i = 0; i < emptyDays; i++) {
            const emptyElement = document.createElement('div');
            emptyElement.className = 'day';
            calendarElement.appendChild(emptyElement);
        }

        for (let day = 1; day <= daysInMonth; day++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'day';
            dayElement.innerHTML = `<h2>${day}</h2>`;
            dayElement.onclick = () => openModal(day);
            dayElement.classList.add("show"); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å `show` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

            const eventKey = `${day}-${month}-${year}`;
            if (events[eventKey]) {
                const event = events[eventKey];
                dayElement.innerHTML += `<div>${event.title}</div>`;
            }

            calendarElement.appendChild(dayElement);
        }

        // –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –¥–Ω–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å
        calendarElement.style.opacity = "1"; // –î–µ–ª–∞–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å –≤–∏–¥–∏–º—ã–º
    }

    function openModal(day) {
        modal.style.display = 'flex';
        blurBackground.style.display = 'block';
        eventTitle.value = '';
        eventDescription.value = '';
        charLimit.innerText = '';
        const month = document.getElementById('month').value;
        const year = document.getElementById('year').value;
        const eventKey = `${day}-${month}-${year}`;
        
        const modalHeader = document.getElementById('modalHeader');
        if (events[eventKey]) {
            eventTitle.value = events[eventKey].title;
            eventDescription.value = events[eventKey].description;
            modalHeader.innerText = '–ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ';
        } else {
            modalHeader.innerText = '–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ';
        }

        eventTitle.dataset.day = day; 
        eventTitle.dataset.month = month; 
        eventTitle.dataset.year = year; 
    }

    function saveEvent() {
        const day = eventTitle.dataset.day;
        const month = eventTitle.dataset.month;
        const year = eventTitle.dataset.year;
        const eventKey = `${day}-${month}-${year}`;
        events[eventKey] = {
            title: eventTitle.value,
            description: eventDescription.value
        };
        saveToLocalStorage(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–±—ã—Ç–∏—è –≤ localStorage
        closeModal();
        updateCalendar();
    }

    function closeModal() {
        modal.style.display = 'none';
        blurBackground.style.display = 'none';
    }

    eventTitle.addEventListener('input', () => {
        charLimit.innerText = `${eventTitle.value.length}/15`;
    });

    eventDescription.addEventListener('input', () => {
        charLimit.innerText = `${eventDescription.value.length}/100`;
    });

    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        modalContent.classList.toggle('dark-mode');
        const selects = document.querySelectorAll('select');
        const inputs = document.querySelectorAll('input');
        const textareas = document.querySelectorAll('textarea');
        selects.forEach(select => select.classList.toggle('dark-mode'));
        inputs.forEach(input => input.classList.toggle('dark-mode'));
        textareas.forEach(textarea => textarea.classList.toggle('dark-mode'));

    }
    document.getElementById('startButton').addEventListener('click', function() {
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–∑–º—ã—Ç–∏—è
    document.getElementById('intro').classList.add('blur');
    // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –∏–Ω—Ç—Ä–æ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
    document.getElementById('intro').classList.add('fade-out');

    // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏, –∑–∞—Ç–µ–º —Å–∫—Ä—ã–≤–∞–µ–º –∏–Ω—Ç—Ä–æ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
    setTimeout(function() {
        document.getElementById('intro').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
    }, 800); // –í—Ä–µ–º—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö, —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∞–Ω–∏–º–∞—Ü–∏–∏
});
</script>
</body>
</html>